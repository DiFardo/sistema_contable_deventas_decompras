{% extends "pagina_maestra.html" %}

{% block titulo %}Cuentas Contables{% endblock %}

{% block link %}
<!-- Asegúrate de cargar Bootstrap primero -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<!-- Luego carga tu CSS personalizado -->
<link href="{{ url_for('static', filename='css/tabla_cuentas.css') }}" rel="stylesheet">
{% endblock %}

{% block contenido %}
<body>
  <!-- Sección principal que contiene la tabla y la barra de búsqueda -->
  <section class="content-section">
    
    <div class="container mt-3">
      
      <!-- Filtro de búsqueda alineado a la izquierda -->
      <div class="search-section mb-3">
        <div class="input-group">
          <input class="form-control border-end-0 border" type="search" placeholder="Buscar..." id="search-input">
          <span class="input-group-append">
            <button class="btn btn-outline-secondary bg-white border-start-0 border-bottom-0 border ms-n5" type="button" id="search-button">
              <i class="fa fa-search"></i>
            </button>
          </span>
        </div>
      </div>

      <!-- Contenedor responsivo para la tabla -->
      <div class="table-responsive" id="tabla-contenedor">
        <table class="table  table-striped" id="tabla-cuentas">
          <thead>
            <tr>
              <th id="header-codigo">Código</th>
              <th id="header-descripcion">Descripción</th>
            </tr>
          </thead>
          <tbody id="tabla-cuerpo">
            {% for cuenta in cuentas %}
            <tr id="fila-cuenta-{{ loop.index }}">
              <td id="codigo-{{ loop.index }}">{{ cuenta[0] }}</td> <!-- Accede al código -->
              <td id="descripcion-{{ loop.index }}">{{ cuenta[1] }}</td> <!-- Accede a la descripción -->
            </tr>
            {% else %}
            <tr>
              <td colspan="2" id="sin-datos">No hay cuentas disponibles</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </section>

<!-- Modal para mostrar detalles de la cuenta -->
<div class="modal fade" id="myModal" tabindex="-1">
  <div class="modal-dialog modal-fullscreen-sm-down animate__animated">
    <div class="modal-content">

      <!-- Modal Header -->
      <div class="modal-header">
        <h4 class="modal-title">Detalle de la Cuenta</h4>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>

      <!-- Modal body -->
      <div class="modal-body">
        <div class="mb-3">
          <label for="modal-codigo" class="form-label"><strong>Código:</strong></label>
          <input type="text" id="modal-codigo" class="form-control" readonly>
        </div>
        <div class="mb-3">
          <label for="modal-descripcion" class="form-label"><strong>Descripción:</strong></label>
          <input type="text" id="modal-descripcion" class="form-control" readonly>
        </div>
      </div>

      <!-- Modal footer -->
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cerrar</button>
      </div>

    </div>
  </div>
</div>
  <!-- Incluye Bootstrap JS y tu archivo JavaScript -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="{{ url_for('static', filename='js/tabla_cuentas.js') }}"></script>
</body>
{% endblock %}
